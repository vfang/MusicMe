{% load staticfiles %}
<!DOCTYPE html>
<!--[if IE 8]>         <html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <title>MusicMe</title>

  
  <link rel="stylesheet" href="{% static "playlist/css/foundation.css" %}" />
  <link rel="stylesheet" href="{% static "playlist/css/musicme.css" %}" />
  <link rel="stylesheet" href="{% static "playlist/css/coverflow.css" %}" />
  <link rel="stylesheet" type="text/css" href="{% static "playlist/css/normalize.css" %}" />

  <script src="{% static "playlist/js/vendor/custom.modernizr.js" %}"></script>
  <script type="text/javascript" src="{% static "playlist/js/vendor/jquery.js" %}"></script>
  <script type="text/javascript" src="{% static "playlist/js/musicme.js" %}"></script>
  <script type="text/javascript" src="{% static "playlist/js/coverflow.js" %}"></script>
  <script type="text/javascript" src="{% static "playlist/js/foundation.min.js" %}"></script>
  
  <script src="http://toma.hk/api.js?v=1"></script>

  <script type="text/javascript">

    $(document).ready(function(){

    //var SONG_LIST_temp = [];
      console.log("ready")      
      {% if song_list %}
        {% autoescape off %}
          handleList.SONG_LIST = {{song_list}};          
          handleList.showList(handleList.SONG_LIST);
          // console.log(SONG_LIST);
        {% endautoescape %}
      {% else %}
        console.log("Error: could not load song list.");
      {% endif %}
      //handleList(SONG_LIST);
      console.log("OK")

      $(".small, button").click(function(){
        // console.log("we are here");
        // console.log($(this).attr("id"));
        for (var i in handleList.SONG_LIST) {
          if ($(this).attr("id") == "play_"+handleList.SONG_LIST[i].songid)
          {
            var a=musicPlayer.createTrackObject(handleList.SONG_LIST[i]);
<<<<<<< HEAD
            
            //This will be where it goes in to the cover flow.
=======
            console.log('TITLE: ' + a.title);
>>>>>>> cdeba4a5e6a2ad9aa72263ebeb7ceef0465069b0
            $("#playlist_video_area").empty().append(a.render());
            a.play();
          }
        }
      });
  })

  </script>

</head>
<body>
 <!-- Header and Nav -->

  <div id="container"></div>
  <!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>-->
  <script src="coverflow.js"></script>
  <script>
    function reset() {

      var replacement = document.createElement('div');
      replacement.id = "container";

      var el = document.getElementById('container');
      el.parentNode.replaceChild(replacement, el);
      
      //$('#container').coverflow({
      coverflow('container').setup({
        item: 1,
        //backgroundcolor: '009900',
        //backgroundopacity: 0,
        //wmode: 'transparent',
        //gradientcolor: 'ff0000',
        //showduration: true,
        //playlist: "playlist.json",
        //playlist: "http://api.flickr.com/services/feeds/groups_pool.gne?id=807213@N20&format=json&jsoncallback=?",
        //route: {
        //  playlist: "items",
        //  image: "media.m"
        //},
        playlist: [
          {
            "title": "snow-motion",
            "description": "what a massive and unbelievable winter we're having!",
            "image": "http://d3el35u4qe4frz.cloudfront.net/eawtAP1q-720.jpg",
            "link": "http://www.google.com/",
            "duration": "183"
          },
          {
            "title": "driving rain",
            "description": "",
            "image": "http://d3el35u4qe4frz.cloudfront.net/njZMLMwy-720.jpg",
            "duration": "782"
          },
          {
            "title": "winter brook",
            "description": "",
            "image": "http://d3el35u4qe4frz.cloudfront.net/Vg7cPUdl-720.jpg"
          }
        ],
        coverwidth: 180,
        coverheight: 150,
        fixedsize: true,
        textoffset: 50
      })
      .on('ready', function() {

        this.on('focus', function(index) {
          document.getElementById('focusindex').innerHTML = index;
        });
        
        this.on('click', function(index, link) {
          document.getElementById('clickindex').innerHTML = index;
          console.log(link);
        });
      });
    }

    reset();


    function addFrame(){
      playlist.push({"title": "MOOO",
        "description": "cow",
        "image": "http://upload.wikimedia.org/wikipedia/commons/0/0c/Cow_female_black_white.jpg",
        "link" : "www.google.com",
        "duration" : "150"
    });
    }
  </script>

<div style="width:480px;">
  <div style="float:right;">Focused: <b id="focusindex">0</b> | Clicked: <b id="clickindex">0</b></div>
  <p>
    <a href="javascript:;" onclick="coverflow().left();">Left</a> - <a href="javascript:;" onclick="coverflow().right();">Right</a>
  </p>
  <p>
    <a href="javascript:;" onclick="coverflow().prev();">Previous</a> - <a href="javascript:;" onclick="coverflow().next();">Next</a>
  </p>
  <p>
    <input id="toval" value="0" size="1"> <a href="javascript:;" onclick="coverflow().to(document.getElementById('toval').value);">To</a>
  </p>
</div>

<button onclick="reset();">Reset</button> 
<button onclick="addFrame();">Addframe</button> 

  <div class="row">
    <div class="large-6 columns end">
      <div class="panel">
        <h1>MusicMe</h1>
      </div>
    </div>
  </div>

  <!-- End Header and Nav -->


  <div class="row">

 <!-- Nav Sidebar -->
    <!-- This is source ordered to be pulled to the left on larger screens -->
    <!-- <div class="large-3 columns ">
      <div class="panel">
        <a href="#"><img src="http://placehold.it/300x240&text=[img]" /></a>
        <h5><a href="#">Your Name</a></h5>
          <div class="section-container vertical-nav" data-section data-options="deep_linking: false; one_up: true">
          <section class="section">
            <h5 class="title"><a href="#">Section 1</a></h5>
          </section>
          <section class="section">
            <h5 class="title"><a href="#">Section 2</a></h5>
          </section>
          <section class="section">
            <h5 class="title"><a href="#">Section 3</a></h5>
          </section>
          <section class="section">
            <h5 class="title"><a href="#">Section 4</a></h5>
          </section>
          <section class="section">
            <h5 class="title"><a href="#">Section 5</a></h5>
          </section>
          <section class="section">
            <h5 class="title"><a href="#">Section 6</a></h5>
          </section>
        </div>

      </div>
    </div> -->

    <!-- Main Feed -->
    <!-- This has been source ordered to come first in the markup (and on small devices) but to be to the right of the nav on larger screens -->
    <div id="playlistarea" class="large-6 columns end">
      
      <!--This will be the container div for the coverflow-->
      <div id="playlist_video_area"></div>

      <div class="row">
        <div class="large-8 columns">
          <input id="songsearch" type="text" placeholder="Add a song to your playlist" />
        </div>
        <div class="large-4 columns">
          <a href="#" class="button small" css="float: left;">Submit</a>
        </div>
      </div>
      <div id="playlist">       
    
      </div>
      
      
      

    </div>

    <!-- Right Sidebar -->
    <!-- On small devices this column is hidden -->
    <!-- <aside class="large-3 columns hide-for-small">
      <p><img src="http://placehold.it/300x440&text=[ad]" /></p>
      <p><img src="http://placehold.it/300x440&text=[ad]" /></p>
    </aside> -->

  </div>


  <!-- Footer -->

  <!-- <footer class="row">
    <div class="large-12 columns">
      <hr />
      <div class="row">
        <div class="large-5 columns">
          <p>&copy; Copyright no one at all. Go to town.</p>
        </div>
        <div class="large-7 columns">
          <ul class="inline-list right">
            <li><a href="#">Section 1</a></li>
            <li><a href="#">Section 2</a></li>
            <li><a href="#">Section 3</a></li>
            <li><a href="#">Section 4</a></li>
            <li><a href="#">Section 5</a></li>
            <li><a href="#">Section 6</a></li>
          </ul>
        </div>
      </div>
    </div>
  </footer> -->
</body>
</html>
